<% if @error.nil? %>
	$('#add_media_div').trigger('reveal:close');
	$('.media_div').prepend("<%=j render(:partial => 'create', :locals => {:new_media => @new_media})%>");
	$('#masonry-container').masonry('reload');
	<% if @new_media['type'] == "youtube" %>
			var playerId = $('.yt-video').first().attr('id');
			var player;
			player = new YT.Player(playerId, {
			   events: { 'onReady': createYTEvent(playerId) }	
			});
			function createYTEvent(playerId){ 
				return function (event) {
					var parent_div = $('#'+playerId).parent('.yt_parent');	
					var player = event.target // Set player reference
					player.mute();
					setTimeout(function(){
						player.pauseVideo();
					}, 2000);
					setTimeout(function(){
						parent_div.find('.overlay').fadeOut();
					}, 3000);	
					$(parent_div).hover(function(){
						player.seekTo(parent_div.data("start"), 'false');
						player.unMute();	
						player.playVideo();	
					}, function(){
						player.pauseVideo();
					});

				}
			}
	<% end %>
<% else %>
	alert("<%= @error %>");
<%end%>